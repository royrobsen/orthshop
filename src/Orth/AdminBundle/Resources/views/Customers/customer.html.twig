{% extends "adminbase.html.twig" %}
{% block content %}
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Kunde bearbeiten</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                          {{ form_start(form) }}
                          {{ form_errors(form) }}
                            {{form_widget(form.save, { 'attr': {'class':'btn btn-primary'}} ) }}
                            <a href="/admin/deletecustomer/{{customer.id}}" >Kunde löschen</a>
                        </div>
                        <div class="panel-body">
                        {% for flashMessage in app.session.flashbag.get('danger') %}
                            <div class="alert alert-danger">
                                {{ flashMessage }}
                            </div>
                        {% endfor %}
                        {% for flashMessage in app.session.flashbag.get('success') %}
                            <div class="alert alert-success">
                                {{ flashMessage }}
                            </div>
                        {% endfor %}
                            <div class="form-group">
                                <div class="form-group row">
                                    <div class="col-md-6">
                                        <label for="firstName">Vorname</label>
                                        {{ form_widget(form.firstName, { 'attr': {'class': 'form-control', 'placeholder' : 'Vorname'} }) }}
                                    </div>
                                    <div class="col-md-6">
                                        <label for="lastName">Nachname</label>
                                        {{ form_widget(form.lastName, { 'attr': {'class': 'form-control', 'placeholder' : 'Nachname'} }) }}
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="form-group row">
                                    <div class="col-md-4">
                                        <label for="street">Straße</label>
                                        {{ form_widget(form.street, { 'attr': {'class': 'form-control', 'placeholder' : 'Straße'} }) }}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="zipcode" class="control-label">PLZ</label>
                                        {{ form_widget(form.zipcode, { 'attr': {'class': 'form-control', 'placeholder' : 'PLZ'} }) }} 
                                    </div>
                                    <div class="col-md-3">
                                        <label for="city" class="control-label">Ort</label>
                                        {{ form_widget(form.city, { 'attr': {'class': 'form-control', 'placeholder' : 'Ort'} }) }} 
                                    </div>
                                    <div class="col-md-3">
                                        <label for="country">Land</label>
                                        {{ form_widget(form.country, { 'attr': {'class': 'form-control', 'placeholder' : 'Land'} }) }}
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="form-group row">
                                    <div class="col-md-6">
                                        <label for="email">E-Mail</label>
                                        {{ form_widget(form.email, { 'attr': {'class': 'form-control', 'placeholder' : 'E-Mail'} }) }}
                                    </div>
                                    <div class="col-md-6">
                                        <label for="orgapegnr">Orgapeg-Nr</label>
                                        {{ form_widget(form.orgapegNumber, { 'attr': {'class': 'form-control', 'placeholder' : 'Orgapeg-Nr'} }) }}
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="form-group row">
                                    <div class="col-md-6">
                                        <label for="invTerm">Zahlungsart</label>
                                        {{ form_widget(form.invoiceTerm, { 'attr': {'class': 'form-control', 'placeholder' : 'Zahlungsart'} }) }}
                                    </div>
                                    <div class="col-md-6">
                                        <label for="delTerm">Versandart</label>
                                        {{ form_widget(form.deliveryTerm, { 'attr': {'class': 'form-control', 'placeholder' : 'Versandart'} }) }}
                                    </div>
                                </div>
                            </div>  
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg--6 -->
                <div class="col-lg-6">
                    <div class="panel panel-default">
                        <div class="panel-heading">

                        </div>
                        <div class="panel-body">
                                <div class="form-group">
                                    <label for="companyName1">Firma 1</label>
                                    {{ form_widget(form.companyName1, { 'attr': {'class': 'form-control', 'placeholder' : 'Firma 1'} }) }}
                                </div>
                                <div class="form-group">
                                    <label for="companyName2">Firma 2</label>
                                    {{ form_widget(form.companyName2, { 'attr': {'class': 'form-control', 'placeholder' : 'Firma 2'} }) }}
                                </div>
                                <div class="form-group">
                                    <label for="companyName3">Firma 3</label>
                                    {{ form_widget(form.companyName3, { 'attr': {'class': 'form-control', 'placeholder' : 'Firma 3'} }) }}
                                </div>                                
                          {{ form_end(form) }}
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg--6 -->
                <!-- /.col-lg--6 -->
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Benutzer - <a href="/admin/new-user/{{customer.id}}" >Neuen Benutzer hinzufügen</a>
                        </div>
                        <div class="panel-body">
                            <form id="filter-form"><label>Benutzer suchen: </label><input name="filter" class="form-control" id="filter" value="" maxlength="30" size="30" type="text"></form>  
                            <table class="table list">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Vorname</th>
                                        <th>Nachname</th>
                                        <th>E-Mailadresse</th>
                                        <th>Gruppe</th>
                                        <th>Aktiv</th>
                                        <th>Bearbeiten</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for user in users %}
                                    <tr>
                                        <td>{{user.id}}</td>
                                        <td>{{user.firstName}}</td>
                                        <td>{{user.lastName}}</td>
                                        <td>{{user.email}}</td>
                                        <td>{% if user.userGroup == 1 %}Administrator{% elseif user.userGroup == 2 %}Einfacher Nutzer{% elseif user.userGroup == 3 %}Moderator{% elseif user.userGroup == 4 %}Erweiterter Nutzer{% endif %}</td>
                                        <td>{% if user.active == 0 %}Nein{% else %}Ja{% endif %}</td>
                                        <td><a href="/admin/user/{{user.id}}">Benutzer bearbeiten</a></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>    
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg--6 -->
            </div>
            <!-- /.row -->
{% endblock %}
{% block js %}
<script src="/assets/js/uiTableFilter.js"></script>
<script>
    $(function() { 
      var theTable = $('table.list')

      $("#filter").keyup(function() {
        $.uiTableFilter( theTable, this.value );
      })

      $('#filter-form').submit(function(){
        theTable.find("tbody > tr:visible > td:eq(1)").mousedown();
        return false;
      }).focus(); //Give focus to input field
      
      var theTable2 = $('table.list2')

      $("#filter2").keyup(function() {
        $.uiTableFilter( theTable2, this.value );
      })

      $('#filter-form2').submit(function(){
        theTable2.find("tbody > tr:visible > td:eq(1)").mousedown();
        return false;
      }).focus(); //Give focus to input field
    }); 
</script>
{% endblock %}
