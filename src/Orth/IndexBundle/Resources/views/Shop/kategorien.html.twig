{% extends "shopbase.html.twig" %}
{% block content %}
<div class="container main-container headerOffset">

    <!-- Main component call to action -->

    <div class="row">
        <div class="breadcrumbDiv col-lg-12">
            <ul class="breadcrumb">
                <li><a href="index.html">Home</a></li>
                <li class="active">Suche</li>
            </ul>
        </div>
    </div>
    <!-- /.row  -->

    <div class="row">

        <!--left column-->

        <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="panel-group" id="accordionNo">
                <!--Category-->
                {% for category in categories %}
                    {% set anzahl = 0 %}
                    {% if category.children is defined %}
                    {% for subcategory in category.children %}
                        {% if subcategory.children is defined %}
                                        {% for sub2category in subcategory.children %}
                                        {% set anzahl = anzahl + sub2category.anzahl %} 
                                        {% endfor %}  
                                    {% endif %}
                    {% endfor %}    
                    {% endif %}
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title"><a data-toggle="collapse" href="#collapse{{category.id}}" class="collapseWill">
                            <span class="pull-left"> <i class="fa fa-caret-right"></i></span><span
                                        class="badge pull-right">{{anzahl}}</span> {{category.catName}} </a></h4>
                    </div>
                    <div id="collapse{{category.id}}" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <ul class="nav nav-pills nav-stacked tree">
                                {% if category.children is defined %}
                                 {% for subcategory in category.children %}
                                    {% set anzahl2 = 0 %}
                                    {% if subcategory.children is defined %}
                                        {% for sub2category in subcategory.children %}
                                        {% set anzahl2 = anzahl2 + sub2category.anzahl %} 
                                        {% endfor %}  
                                    {% endif %}
                                <li class="dropdown-tree open-tree active"><a class="dropdown-tree-a"> <span
                                        class="badge pull-right">{{anzahl2}}</span> {{subcategory.catName}} </a>
                                    {% if subcategory.children is defined %}    
                                    <ul class="category-level-2 dropdown-menu-tree">
                                        {% for sub2category in subcategory.children %}
                                        <li class="dropdown-tree"><a class="dropdown-tree-a" href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({'q': app.request.get('q')})|merge({'c': sub2category.id})) }}">{{sub2category.catName}} <span
                                        class="badge pull-right">{{sub2category.anzahl}}</span> </a>           
                                        </li>
                                        {% endfor %}   
                                    </ul>
                                    {% endif %}
                                </li>
                                {% endfor %}
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </div>
                <!--/Category menu end-->
                {% endfor %}
            </div>
        </div>

        <!--right column-->
        <div class="col-lg-9 col-md-9 col-sm-12">
            <div class="w100 clearfix category-top">
                <h2> SUCHEN </h2>
            </div>
            <!--/.category-top-->
            <form action="{{ app.request.getBaseUrl ~ app.request.getPathInfo }}" name="search2" method="get">
            <div class="form-group">
                <div class="input-group input-group-sm"> 
                    <div class="icon-addon addon-sm">
                        <input type="text" name="q" placeholder="Suchbegriff eingeben" class="form-control">
                        <label for="suche" class="glyphicon glyphicon-search" rel="tooltip" title="suche"></label>
                    </div>
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">Suchen!</button>
                    </span>
                </div>
            </div>
            <div class="w100 productFilter clearfix">

                <div class="pull-right ">
                    <div class="change-view pull-right"><a href="#" title="Grid" class="grid-view"> <i
                            class="fa fa-th-large"></i> </a> <a href="#" title="List" class="list-view "><i
                            class="fa fa-th-list"></i></a></div>
                </div>
            </div>
            </form>
            <!--/.productFilter-->
            <div class="row  categoryProduct xsResponse clearfix">
                <div class="col-lg-12 col-md-12 col-sm-12">
                {% if articles is empty %}
                    <h3>Ihre Suche ergab leider keine Ergebnisse! Bitte versuchen Sie es mit einem anderen Suchbegriff.</h3>
                {% endif %}
                </div>
                {% for article in articles %}
                <div class="item col-sm-4 col-lg-4 col-md-4 col-xs-6">
                    <div class="product">
                        <a id="{{article.id}}" class="add-fav tooltipHere">
                            <i class="glyphicon glyphicon-heart"></i>
                        </a>

                        <div class="image">
                            <a href="/product?q={{article.id}}"><img src="/images/product/nw/{{article.images.0.picName}}" alt="img"
                                                                class="img-responsive"></a>

                        </div>
                        <div class="description">
                            <div class="shortname">
                                <h4><a href="/product?q={{article.id}}">{{article.shortName}}</a></h4>
                            </div>
                            <div class="grid-description">
                                <p>{{article.shortDescription}} </p>
                            </div>
                            <div class="list-description">
                                <p> {{article.longDescription}}  </p>
                            </div>
                        </div>
                                <div class="price"><span>ab {{article.showedPrice|number_format(2, ',', '.')}} € </span></div>    
                        <div class="action-control"><a href="/product?q={{article.articleNumber}}" class="btn btn-primary"> <span class="add2cart"><i
                                class="glyphicon glyphicon-shopping-cart"> </i> Zum Artikel </span> </a></div>
                    </div>
                </div>
                <!--/.item-->
                {% endfor %}
            </div>
            <div class="gap"></div>
            <!--/.categoryProduct || product content end-->
            <div class="w100 categoryFooter">
                {% if totalpages > 1 %}
                <div class="pagination pull-left no-margin-top">
                    <ul class="pagination no-margin-top">
                        <li><a href="/">«</a></li>
                        {% set pageIt = app.request.get('p') - 3 %}
                        {% set pageItBase = 1 %}
                        {% set maxPage = 5 %}
                        {% if totalpages < 5 %}
                            {% set maxPage = totalpages %}
                        {% endif %}
                        {% for i in range(1, maxPage) %} 
                        {% if app.request.get('p') <= 3%}
                            {% set pageItBase = i %}
                        <li><a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge(app.request.query.all)|merge({'p': pageItBase})) }}">{{pageItBase}}</a></li>
                        {% endif %}
                        {% if app.request.get('p') >= 4 and pageIt < totalpages%}
                            {% set pageIt = (pageIt + 1) %}
                        <li><a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge(app.request.query.all)|merge({'p': pageIt})) }}">{{pageIt}}</a></li>
                        {% endif %}
                        {% endfor %}
                        <li><a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge(app.request.query.all)|merge({'p': totalpages})) }}">»</a></li>
                    </ul>
                </div>
                <div class="pull-right pull-right col-sm-4 col-xs-12 no-padding text-right text-left-xs">
                    {% if app.request.get('p') is empty %}
                        {% set currPage = 1 %}
                    {% endif %}
                    {% if not app.request.get('p') is empty %}
                        {% set currPage = app.request.get('p') %}
                    {% endif %}
                    <p>Zeige Seite {{ currPage }} von {{totalpages}} Seiten</p>
                </div>
                {% endif %}        
            </div>
            <!--/.categoryFooter-->
        </div>
        <!--/right column end-->
    </div>
    <!-- /.row  -->
</div>
<!-- /main container -->

<div class="gap"></div>
<!-- Product Details Modal  -->
<div class="modal fade" id="product-details-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <button aria-hidden="true" data-dismiss="modal" class="close" type="button"> ×</button>
            <div class="col-lg-5 col-md-5 col-sm-5  col-xs-12">

                <!-- product Image -->

                <div class="main-image  col-lg-12 no-padding style3">
                    <a class="product-largeimg-link" href="product-details.html"><img src="/images/zoom/zoom1.jpg"
                                                                                      class="img-responsive product-largeimg"
                                                                                      alt="img">
                    </a>
                </div>
                <!--/.main-image-->

                <div class="modal-product-thumb">
                    <a class="thumbLink selected"><img data-large="/images/zoom/zoom1.jpg" alt="img"
                                                       class="img-responsive" src="/images/zoom/zoom1.jpg">
                    </a>
                    <a class="thumbLink"><img data-large="/images/zoom/zoom2.jpg" alt="img" class="img-responsive"
                                              src="/images/zoom/zoom2.jpg">
                    </a>
                    <a class="thumbLink"><img data-large="/images/zoom/zoom3.jpg" alt="img" class="img-responsive"
                                              src="/images/zoom/zoom3.jpg">
                    </a>
                </div>
                <!--/.modal-product-thumb-->
            </div>
            <!--/ product Image-->


            <div class="col-lg-7 col-md-7 col-sm-7 col-xs-12 modal-details no-padding">
                <div class="modal-details-inner">
                    <h1 class="product-title"> Lorem ipsum dolor sit amet</h1>

                    <h3 class="product-code">Product Code : DEN1098</h3>

                    <div class="product-price"><span class="price-sales"> $70</span> <span
                            class="price-standard">$95</span></div>
                    <div class="details-description">
                        <p>In scelerisque libero ut elit porttitor commodo Suspendisse laoreet magna. </p>
                    </div>
                    <div class="color-details"><span class="selected-color"><strong>COLOR</strong></span>
                        <ul class="swatches Color">
                            <li class="selected">
                                <a style="background-color:#f1f40e"> </a>
                            </li>
                            <li>
                                <a style="background-color:#adadad"> </a>
                            </li>
                            <li>
                                <a style="background-color:#4EC67F"> </a>
                            </li>
                        </ul>
                    </div>
                    <!--/.color-details-->

                    <div class="productFilter productFilterLook2">
                        <div class="filterBox">
                            <select>
                                <option value="strawberries" selected>Quantity</option>
                                <option value="mango">1</option>
                                <option value="bananas">2</option>
                                <option value="watermelon">3</option>
                                <option value="grapes">4</option>
                                <option value="oranges">5</option>
                                <option value="pineapple">6</option>
                                <option value="peaches">7</option>
                                <option value="cherries">8</option>
                            </select>
                        </div>
                        <div class="filterBox">
                            <select>
                                <option value="strawberries" selected>Size</option>
                                <option value="mango">XL</option>
                                <option value="bananas">XXL</option>
                                <option value="watermelon">M</option>
                                <option value="apples">L</option>
                                <option value="apples">S</option>
                            </select>
                        </div>
                    </div>
                    <!-- productFilter -->

                    <div class="cart-actions">
                        <div class="addto">
                            <button onclick="productAddToCartForm.submit(this);" class="button btn-cart cart first"
                                    title="Add to Cart" type="button">Add to Cart
                            </button>
                            <a class="link-wishlist wishlist">Add to Wishlist</a></div>
                    </div>
                    <!--/.cart-actions-->

                    <div class="product-share clearfix">
                        <p> SHARE </p>

                        <div class="socialIcon">
                            <a href="#"> <i class="fa fa-facebook"></i>
                            </a>
                            <a href="#"> <i class="fa fa-twitter"></i>
                            </a>
                            <a href="#"> <i class="fa fa-google-plus"></i>
                            </a>
                            <a href="#"> <i class="fa fa-pinterest"></i>
                            </a>
                        </div>
                    </div>
                    <!--/.product-share-->
                </div>
                <!--/.modal-details-inner-->
            </div>
            <!--/.modal-details-->
            <div class="clear"></div>
        </div>
        <!--/.modal-content-->
    </div>
    <!--/.modal-content-->
</div>
<!-- End Modal -->


{% endblock %}
